<h3>
  Service Order #<%= @service_order.number %>
  <% if @service_order.completed? %>
    (Complete)
  <% end %>
</h3>


<% if @service_order.completed? %>
  <%= link_to 'Re-open', service_order_url(@service_order, "service_order[completed]" => false), method: 'put', class: 'btn btn-success' %>
<% else %>
  <%= link_to 'Complete', service_order_url(@service_order, "service_order[completed]" => true), method: 'put', class: 'btn btn-success' %>
<% end %>
<%= link_to 'Edit', edit_service_order_path(@service_order), class: 'btn btn-warning' %>
<%= link_to 'Destroy', @service_order, class: 'btn btn-danger', method: :delete, data: { confirm: 'Are you sure?' } %>
<%= link_to 'Back', service_orders_path, class: 'btn' %>

<p>
  <b>Description:</b>
  <%= @service_order.description %>
</p>

<p>
  <b>Category:</b>
  <%= @service_order.category.name %>
</p>

<p>
  <b>Budget:</b>
  <%= @service_order.budget %>
</p>

<table class="table">
  <tr>
    <th>Straight Hours</th>
    <th>Travel Hours</th>
    <th>Overtime Hours</th>
    <th>Doubletime Hours</th>
    <th>Total Hours</th>
    <th>Remaining Hours</th>
  </tr>
  <tr>
    <td><%= @service_order.straight_hours %></td>
    <td><%= @service_order.travel_hours %></td>
    <td><%= @service_order.overtime_hours %></td>
    <td><%= @service_order.doubletime_hours %></td>
    <td><%= @service_order.total_hours %></td>
    <td><%= @service_order.remaining_hours %></td>
  </tr>
</table>

<h3>Confirmations</h3>

<%= link_to "Add Confirmation", new_confirmation_url(service_order_id: @service_order.id), class: 'btn btn-large btn-success' %>

<table class="table table-striped table-hover">
  <tr>
    <th>Number</th>
    <th>Performed on</th>
    <th>Travel hours</th>
    <th>Straight hours</th>
    <th>Overtime hours</th>
    <th>Doubletime hours</th>
    <th>Description</th>
  </tr>

<% @service_order.confirmations.order("performed_on DESC").each do |confirmation| %>
  <tr>
    <td><%= link_to confirmation.number, confirmation, class: 'btn btn-primary' %></td>
    <td><%= confirmation.performed_on %></td>
    <td><%= confirmation.travel_hours %></td>
    <td><%= confirmation.straight_hours %></td>
    <td><%= confirmation.overtime_hours %></td>
    <td><%= confirmation.doubletime_hours %></td>
    <td><%= confirmation.description %></td>
  </tr>
<% end %>
</table>
